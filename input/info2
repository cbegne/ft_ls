FONCTIONS AUTORISÉES
opendir: ouvre le repertoire en param et associe un directory stream dessus
readdir: retourne un pointeur vers l'entrée suivante dans le repertoire donné en param
closedir: clos le directory stream donné en param et free la structure
perror: écrit le message d'erreur sur stderr
strerror: retourne une string correspondant au numero d'erreur
write
malloc
free
exit: sortir et donner un code de retour

Utile pour -l

stat: informations sur un fichier
lstat: informations sur un fichier et sur le lien symbolique
getpwuid: informations sur un user
getgrgid: informations sur un groupe
time: retourne le temps
ctime: transforme le temps en string
readlink: place le contenu du lien symbolique dans un buffer

Utile pour bonus

listxattr: liste d'attribut étendu
getxattr: obtenir un attribut étendu

opendir / readdir / closedir

struct DIR => /usr/include/dirent.h
struct dirent => /usr/include/sys/dirent.h

stat / lstat

struct stat => sys/stat.h
dev_t => __int32_t
mode_t => __uint16_t
nlink_t => __uint16_t
ino_t => __uint64_t
uid_t => __uint32_t
gid_t => __uint32_t
struct timespec => sys/_types/_timespec.h
off_t => __int64_t

st_mode

Voir sys/types/_sifmt.h
Voir sys/stat.h

major/minor

major(st_dev)
minor(st_dev)

getpwuid / getgrgid

uid_t => donné par stat.st_uid
gid_t => donné par stat.st_gid

cas : 

ls -l 1 fichier
-rw-r--r--  1 cbegne  2016_paris  151 Jan 19 15:07 error

ls -l 2 fichiers
-rw-r--r--  1 cbegne  2016_paris   151 Jan 19 15:07 error
-rw-r--r--  1 cbegne  2016_paris  1337 Jan 19 15:06 info2

ls -l 1 dossier
total 8
-rw-r--r--  1 cbegne  2016_paris  1779 Jan 19 15:06 ft_ls.h

ls -l 1 dossier 1 fichier (fichier en premier)
-rw-r--r--  1 cbegne  2016_paris  151 Jan 19 15:07 error

includes/:
total 8
-rw-r--r--  1 cbegne  2016_paris  1779 Jan 19 15:06 ft_ls.h

ls -l 2 dossiers (dont un vide)
includes:
total 8
-rw-r--r--  1 cbegne  2016_paris  1779 Jan 19 15:06 ft_ls.h

vide:

ls -l 1 dossier vide

